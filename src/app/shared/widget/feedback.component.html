<div class="widget__feedback">
  <button aria-label="Abrir formulário para escrever um comentário sobre um problema, sugestão ou ideia" mat-fab color="primary" matTooltip="Comentar" [matMenuTriggerFor]="menu"
    *ngIf="!issueShow && !ideaShow && !suggestionShow && !sendSuccess">
    <mat-icon><i class="ph-chat-teardrop-dots"></i></mat-icon>
  </button>
  <mat-menu #menu="matMenu" yPosition="above">
    <button aria-label="Escrever sobre um problema" mat-menu-item (click)="issueForms()" matTooltip="Reportar um problema" [matTooltipPosition]="'left'">🐛
      Problema</button>
    <button aria-label="Escrever sobre uma ideia" mat-menu-item (click)="ideaForms()" matTooltip="Deixar uma ideia" [matTooltipPosition]="'left'">💡
      Ideia</button>
    <button aria-label="Escrever sobre uma sugestão de melhoria" mat-menu-item (click)="suggestionForms()" matTooltip="Sugerir melhorias" [matTooltipPosition]="'left'">📝
      Sugestão</button>
  </mat-menu>

  <mat-card *ngIf="issueShow || ideaShow || suggestionShow" class="widget__feedback--form">
    <mat-card-header>
      <mat-card-title class="widget__feedback--form-title">
        <label for="feedback">{{ title }}</label>
        <button aria-label="Fechar formulário de comentários" mat-icon-button (click)="closeForms()">
          <mat-icon><i class="ph-x"></i></mat-icon>
        </button>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form (ngSubmit)="sendFeedback()" #feedbackForm="ngForm">
        <mat-form-field *ngIf="issueShow" appearance="outline" class="widget__feedback--form-input" >
          <textarea matInput name="feedback" id="feedback" [(ngModel)]="feedback"
            placeholder="Algo não está funcionando bem? Queremos corrigir. Conte com detalhes o que está acontecendo..."></textarea>
        </mat-form-field>
        <mat-form-field *ngIf="ideaShow" appearance="outline" class="widget__feedback--form-input">
          <textarea matInput name="feedback" id="feedback" [(ngModel)]="feedback" placeholder="Teve uma ideia de melhoria ou de nova funcionalidade? Conta pra gente!"></textarea>
        </mat-form-field>
        <mat-form-field *ngIf="suggestionShow" appearance="outline" class="widget__feedback--form-input">
          <textarea matInput name="feedback" id="feedback" [(ngModel)]="feedback" placeholder="Queremos te ouvir. O que você gostaria de nos dizer? " id="feedback"></textarea>
        </mat-form-field>
        <button aria-label="Enviar comentário" mat-raised-button type="submit" color="primary" class="widget__feedback--submit">Enviar comentário</button>
      </form>
    </mat-card-content>
  </mat-card>
  <mat-card *ngIf="sendSuccess" class="widget__feedback--form">
    <mat-card-header>
      <mat-card-title class="widget__feedback--form-title">
        <span></span>
        <button aria-label="Fechar formulário de comentários" mat-icon-button (click)="closeForms()">
          <mat-icon><i class="ph-x"></i></mat-icon>
        </button>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content class="widget__feedback--send">
      <h1>✅</h1>
      <h2>Agradecemos o feedback!</h2>
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </mat-card-content>
  </mat-card>
</div>
